<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sticker Interactivo y Movible</title>
    <style>
        /* --- ESTILOS DEL STICKER --- */

        /* 1. Base del contenedor del Sticker */
        .movable-resizable-container {
            position: absolute;
            top: 50px;
            left: 50px;
            width: 200px; /* Tamaño inicial */
            height: 200px; /* Tamaño inicial */
            border: none; /* ELIMINADO: Borde azul */
            cursor: grab;
            box-sizing: border-box;
            user-select: none;
            overflow: hidden; /* Necesario para que el efecto doblado funcione bien */
            
            /* EFECTO HOVER: Transición suave */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; 
        }

        /* 2. EFECTO HOVER: Despegue/Giro (Invitación a la interacción) */
        .movable-resizable-container:hover {
            cursor: pointer;
            transform: rotate(1deg) scale(1.02); /* Gira y se agranda un poco */
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3); /* Sombra para simular elevación */
        }

        /* 3. Pseudo-elemento para el efecto "Esquina Doblada" */
        .movable-resizable-container:before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 0;
            
            /* Crea el triángulo de papel doblado (usa el color del fondo, asumimos blanco) */
            border-top: 25px solid #ffffff; /* Color del papel doblado */
            border-left: 25px solid transparent; 
            
            /* Sombra sutil para dar la ilusión de pliegue */
            box-shadow: -1px 1px 1px rgba(0, 0, 0, 0.2); 
            z-index: 10;
        }

        /* 4. Estilos para la imagen dentro del contenedor */
        .movable-resizable-container img {
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover;
        }

        /* 5. ELIMINADO: El bloque .resizer ha sido quitado para usar el zoom por rueda */
    </style>
</head>
<body>

    <div id="imageContainer" class="movable-resizable-container">
        <img src="https://images.are.na/eyJidWNrZXQiOiJhcmVuYV9pbWFnZXMiLCJrZXkiOiI0MTI5MzY3MC9vcmlnaW5hbF8xMTM2ZDY2ZDI0OTNmYTQ3ZDc5MWEwOGNiZWQ4ZjFkNC5wbmciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjYwMCwiaGVpZ2h0Ijo2MDAsImZpdCI6Imluc2lkZSIsIndpdGhvdXRFbmxhcmdlbWVudCI6dHJ1ZX0sIndlYnAiOnsicXVhbGl0eSI6NzV9LCJmbGF0dGVuIjp7ImJhY2tncm91bmQiOnsiciI6MjAzLCJnIjoyMDMsImIiOjIwM319LCJqcGVnIjp7InF1YWxpdHkiOjc1fSwicm90YXRlIjpudWxsfX0=" alt="Foto proporcionada por el usuario">
    </div>

    <script>
        // --- 1. CONFIGURACIÓN INICIAL ---
        const container = document.getElementById('imageContainer');
        let isDragging = false; // Bandera para arrastre
        let currentX; // Posición X actual del ratón
        let currentY; // Posición Y actual del ratón
        let initialX; // Posición X inicial del ratón
        let initialY; // Posición Y inicial del ratón
        let xOffset = 0; // Desplazamiento X del contenedor
        let yOffset = 0; // Desplazamiento Y del contenedor

        // --- 2. NUEVA FUNCIÓN: ZOOM (Rueda/Pellizco) ---
        function handleZoom(e) {
            e.preventDefault(); // Evita el scroll normal de la página

            const scaleFactor = 0.05; // Cuánto cambia el tamaño por "tick" de la rueda
            let currentWidth = container.offsetWidth;
            let currentHeight = container.offsetHeight;
            let delta = e.deltaY * -0.01; // Ajuste para la dirección de la rueda/trackpad

            // Calcula el nuevo ancho manteniendo la proporción
            let newWidth = currentWidth + currentWidth * delta * scaleFactor;
            let newHeight = currentHeight + currentHeight * delta * scaleFactor;

            // Establece límites mínimos y máximos para el zoom
            const minSize = 50; // Tamaño mínimo
            const maxSize = 800; // Tamaño máximo

            if (newWidth > minSize && newWidth < maxSize) {
                container.style.width = newWidth + 'px';
                container.style.height = newHeight + 'px';
            }
        }
        
        // --- 3. FUNCIONES DE ARRASTRE ---

        function dragStart(e) {
            e.preventDefault();
            isDragging = true;
            initialX = e.clientX - xOffset;
            initialY = e.clientY - yOffset;
            container.style.cursor = 'grabbing';
        }

        function drag(e) {
            if (isDragging) {
                e.preventDefault();
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;

                xOffset = currentX;
                yOffset = currentY;

                setTranslate(currentX, currentY, container);
            }
        }

        function dragEnd(e) {
            initialX = currentX;
            initialY = currentY;
            isDragging = false;
            container.style.cursor = 'grab';
        }

        // Función auxiliar para aplicar el movimiento
        function setTranslate(xPos, yPos, el) {
            el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
        }

        // --- 4. ASIGNACIÓN DE EVENT LISTENERS ---

        // Eventos para el contenedor (Arrastre)
        container.addEventListener("mousedown", dragStart, false);
        document.addEventListener("mouseup", dragEnd, false);
        document.addEventListener("mousemove", drag, false);
        
        // Evento NUEVO para el Zoom (Rueda/Pellizco)
        container.addEventListener("wheel", handleZoom, false);

    </script>
</body>
</html>
